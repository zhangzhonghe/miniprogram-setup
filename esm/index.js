function e(e,t,n,o){return new(n||(n=Promise))((function(a,i){function l(e){try{s(o.next(e))}catch(e){i(e)}}function r(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,r)}s((o=o.apply(e,t||[])).next())}))}const t=e=>"function"==typeof e,n=(e,t)=>{Object.keys(e).forEach((n=>{t(e[n],n)}))};let o=null;const a=()=>o,i=e=>o=e,l=()=>o=null,r=t=>{t.isRefreshing||(t.isRefreshing=!0,l(),function(t){e(this,void 0,void 0,(function*(){return yield Promise.resolve().then(t)}))}((()=>{t(),t.isRefreshing=!1})),i(t))},s=e=>{if(null==e)return;const t=a();return function(...n){return null!=t&&(r(t),i(t)),e.call(this,...n)}};const c=Promise.prototype.then,u=Promise.prototype.catch,f=Promise.prototype.finally,h=wx;if(!c.$$isRewritten){Promise.prototype.then=function(e,t){return c.call(this,s(e),s(t))},Promise.prototype.catch=function(t){return e(this,void 0,void 0,(function*(){return yield u.call(this,s(t))}))},Promise.prototype.finally=function(t){return e(this,void 0,void 0,(function*(){return yield f.call(this,s(t))}))};const o=setTimeout;setTimeout=function(e,...t){return o.call(this,s(e),...t)},function(){const e={};n(h,((n,o)=>{t(n)?e[o]=function(e,...t){if(null!==(o=e)&&"object"==typeof o){const{success:t,fail:n,complete:o}=e;t&&(e.success=s(t)),n&&(e.fail=s(n)),o&&(e.complete=s(o))}var o;return n.call(this,e,...t)}:e[o]=n})),wx=Object.freeze(e)}(),Promise.prototype.then.$$isRewritten=!0}let d=null,p=null;const g=()=>d,m=()=>{if(__TEST__)return p;const e=getCurrentPages();return e[e.length-1]};let v=null;const P=e=>S("ready",e),w=e=>S("moved",e),y=e=>S("detached",e),R=e=>S("error",e);function S(e,t){const n=null==v?void 0:v[e];if(null!=n){let e=n.get(g());null!=e||(e=[],n.set(g(),e)),e.push(s(t))}}const b=e=>(null!=e.setup&&function(e){var o;const r=null!=v||(v={ready:new Map,moved:new Map,detached:new Map,error:new Map}),c=function(e){const t=e.lifetimes=e.lifetimes||{},o={};return n(t,((e,t)=>{o[t]=e})),o}(e),u=function(e){const t=e.properties;return t?Object.keys(t).join(","):""}(e),f=null===(o=e.observers)||void 0===o?void 0:o[u],h=e.setup;(function(e,t){const o=t.lifetimes=t.lifetimes||{};n(e,((e,t)=>{o[t]=function(...t){var n;null===(n=e.get(this))||void 0===n||n.forEach((e=>e(...t)))}}))})(r,e),u&&((e.observers||(e.observers={}))[u]=function(...e){var t;null==f||f.call(this,...e),null===(t=this.$$updateData)||void 0===t||t.call(this)});(e.lifetimes||(e.lifetimes={})).attached=function(){var o;const r={};let u;function f(){!function(e,o){const a={};n(o,((n,o)=>{t(n)?e[o]=s(n):a[o]=n})),e.setData(a)}(this,u()),l(),y((()=>(e=>{null!=v&&n(v,(t=>{t.delete(e)}))})(this)))}null===(o=c.attached)||void 0===o||o.call(this),__TEST__&&(d=this),n(c,((e,t)=>{"attached"!==t&&("ready"===t&&P(e),"moved"===t&&w(e),"detached"===t&&y(e),"error"===t&&R(e))})),i((()=>{if(!t(u))return;const e=u();n(e,((n,o)=>{t(n)&&delete e[o]})),this.setData(e)})),this.$$updateData=a(),null!=e.properties&&n(e.properties,((e,t)=>{Object.defineProperty(r,t,{get:()=>this.data[t],set(){}})})),u=h(r,function(e){const t={},n=["animate","clearAnimation","createIntersectionObserver","createSelectorQuery","dataset","getOpenerEventChannel","getPageId","getRelationNodes","getTabBar","groupSetData","hasBehavior","id","is","selectAllComponents","selectComponent","selectOwnerComponent","setUpdatePerformanceListener","triggerEvent"];for(const o of n)t[o]=e[o];return Object.freeze(t)}(this)),t(u)?f.call(this):u instanceof Promise&&u.then((e=>{u=e,f.call(this)}))}}(e),Component(e));var T;!function(e){e.onPageLoad="onLoad",e.onPageShow="onShow",e.onPageHide="onHide",e.onPageReady="onReady",e.onPageUnload="onUnload",e.onPageResize="onResize",e.onPageScroll="onPageScroll",e.onPullDownRefresh="onPullDownRefresh",e.onReachBottom="onReachBottom",e.onTabItemTap="onTabItemTap",e.onSaveExitState="onSaveExitState"}(T||(T={}));const D=e=>U(T.onPageShow,e),M=e=>U(T.onPageHide,e),E=e=>U(T.onPageReady,e),O=e=>U(T.onPageUnload,e),x=e=>U(T.onPageResize,e),C=e=>U(T.onPageScroll,e),$=e=>U(T.onPullDownRefresh,e),B=e=>U(T.onReachBottom,e),I=e=>U(T.onTabItemTap,e),j=e=>U(T.onSaveExitState,e);let z=null;const _=()=>z||(z={onShow:new Map,onHide:new Map,onReady:new Map,onUnload:new Map,onPullDownRefresh:new Map,onReachBottom:new Map,onPageScroll:new Map,onResize:new Map,onTabItemTap:new Map,onSaveExitState:new Map}),L=e=>{null!=z&&n(z,(t=>{t.delete(e)}))};function U(e,t){const n=null==z?void 0:z[e];if(null!=n){let e=n.get(m());null!=e||(e=[],n.set(m(),e)),e.push(s(t))}}const H=e=>(null!=e.setup&&function(e){const o=_(),r=function(e){const t={};return n(T,(n=>{e[n]&&(t[n]=e[n])})),t}(e),c=e.setup;(function(e,t){n(e,((e,n)=>{t[n]=function(...t){var n;null===(n=e.get(this))||void 0===n||n.forEach((e=>e(...t)))}}))})(o,e),e.onLoad=function(e){var o;let u;function f(){!function(e,o){const a={};n(o,((n,o)=>{t(n)?e[o]=s(n):a[o]=n})),e.setData(a)}(this,u()),l(),O((()=>L(this)))}null===(o=r.onLoad)||void 0===o||o.call(this,e),p=this,n(r,((e,t)=>{"onLoad"!==t&&(t===T.onPageShow&&D(e),t===T.onPageHide&&M(e),t===T.onPageReady&&E(e),t===T.onPageUnload&&O(e),t===T.onPageResize&&x(e),t===T.onPullDownRefresh&&$(e),t===T.onReachBottom&&B(e),t===T.onPageScroll&&C(e),t===T.onTabItemTap&&I(e),t===T.onSaveExitState&&j(e))})),i((()=>{if(!t(u))return;const e=u();n(e,((n,o)=>{t(n)&&delete e[o]})),this.setData(e)})),this.$$updateData=a(),u=c(e,function(e){const t={},n=["animate","clearAnimation","createIntersectionObserver","createSelectorQuery","getOpenerEventChannel","getPageId","getRelationNodes","getTabBar","groupSetData","hasBehavior","is","options","route","selectAllComponents","selectComponent","selectOwnerComponent","setUpdatePerformanceListener"];for(const o of n)t[o]=e[o];return Object.freeze(t)}(this)),t(u)?f.call(this):u instanceof Promise&&u.then((e=>{u=e,f.call(this)}))}}(e),Page(e));export{b as ComponentWithSetup,H as PageWithSetup,y as onDetached,R as onError,w as onMoved,M as onPageHide,E as onPageReady,x as onPageResize,C as onPageScroll,D as onPageShow,O as onPageUnload,$ as onPullDownRefresh,B as onReachBottom,P as onReady,j as onSaveExitState,I as onTabItemTap,s as useAutoUpdate};
